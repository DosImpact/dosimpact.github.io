"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[2517],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>g});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(r),d=a,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||o;return r?n.createElement(g,s(s({ref:t},p),{},{components:r})):n.createElement(g,s({ref:t},p))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[u]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6161:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=r(87462),a=(r(67294),r(3905));const o={sidebar_position:2},s="Zod",i={unversionedId:"g-fe/react/thrid-party/thrid-2-zod",id:"g-fe/react/thrid-party/thrid-2-zod",title:"Zod",description:"- Zod",source:"@site/docs/g-fe/4-react/5-thrid-party/thrid-2-zod.md",sourceDirName:"g-fe/4-react/5-thrid-party",slug:"/g-fe/react/thrid-party/thrid-2-zod",permalink:"/docs/g-fe/react/thrid-party/thrid-2-zod",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-fe/4-react/5-thrid-party/thrid-2-zod.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"frontEnd",previous:{title:"\ucc44\ub110\ud1a1 \uc5f0\ub3d9\ud558\uae30",permalink:"/docs/g-fe/react/thrid-party/thrid-1-channeltalk"},next:{title:"ai/react",permalink:"/docs/g-fe/react/thrid-party/thrid-3-ai"}},l={},c=[{value:"eg) Basic - UserSchema",id:"eg-basic---userschema",level:2},{value:"eg) gpt tools",id:"eg-gpt-tools",level:2},{value:"eg) streamObject",id:"eg-streamobject",level:2},{value:"eg) refine, filetype",id:"eg-refine-filetype",level:2}],p={toc:c},u="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"zod"},"Zod"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#zod"},"Zod"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#eg-basic---userschema"},"eg) Basic - UserSchema")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#eg-gpt-tools"},"eg) gpt tools")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#eg-streamobject"},"eg) streamObject")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#eg-refine-filetype"},"eg) refine, filetype"))))),(0,a.kt)("p",null,"Zod \uc65c \uc0ac\uc6a9\ud558\ub294\uac00?  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc720\ud6a8\uc131 \uac80\uc99d \ub77c\uc774\ube0c\ub7ec\ub9ac  "),(0,a.kt)("li",{parentName:"ul"},"\ud0c0\uc785\ucd94\ub860 \uae30\ub2a5 ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const UserSchema = z.object({\n  name: z.string(),\n  email: z.string().email(),\n});\ntype User = z.infer<typeof UserSchema>;\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"ai-sdk\uc640 \uc5f0\ub3d9\ud574\uc11c \uc0ac\uc6a9 \uac00\ub2a5, json \uc2a4\ud0a4\ub9c8 \ubaa8\ub4dc\uc5d0 zod\ub97c \uc5f0\uacb0\ud558\uc5ec \ubcf5\uc7a1\ud55c \uad6c\uc870\uc758 \uc751\ub2f5 \uac00\ub2a5.  ")),(0,a.kt)("h2",{id:"eg-basic---userschema"},"eg) Basic - UserSchema"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"z.object : \uac1d\uccb4\uc758 \uad6c\uc870 \uc815\uc758  "),(0,a.kt)("li",{parentName:"ul"},"UserSchema.parse(body) : \uc720\ud6a8\uc131 \uac80\uc0ac \uc218\ud589  "),(0,a.kt)("li",{parentName:"ul"},"error instanceof z.ZodError, error.issue : \uc720\ud6a8\uc131 \uac80\uc0ac \uc2e4\ud328 \uc560\ub7ec  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// TS : app/api/hello/route.ts\nimport { z } from "zod";\n\n// 1.\uc2a4\ud0a4\ub9c8 \uc815\uc758\nconst UserSchema = z.object({\n  name: z.string().min(3, { message: "\ucd5c\uc18c 3\uae00\uc790" }),\n  email: z.string().email({ message: "\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2c8\ub2e4." }),\n});\n\nexport const POST = async (request: Request) => {\n  try {\n    const body = await request.json();\n    // 2.\uc2a4\ud0a4\ub9c8 \ud14c\uc2a4\ud2b8  \n    const user = UserSchema.parse(body);\n\n    return NextResponse.json({\n      success: true,\n      user,\n    });\n  } catch (error) {\n    console.error(error);\n\n    // SyntaxError: Unexpected end of JSON input\n    if (error instanceof SyntaxError) {\n      return NextResponse.json(\n        { error: "Invalid JSON format" },\n        { status: 400 }\n      );\n    }\n\n    // 3.zod error\n    if (error instanceof z.ZodError) {\n      const errorMessages = error.issues\n        .map((issue) => issue.message)\n        .join(", ");\n\n      return NextResponse.json(\n        { error: "Invalid user data : " + errorMessages },\n        { status: 400 }\n      );\n    }\n\n    // internal server error\n    return NextResponse.json(\n      { error: "Internal server error" },\n      { status: 500 }\n    );\n  }\n};\n\n')),(0,a.kt)("h2",{id:"eg-gpt-tools"},"eg) gpt tools"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"free weahter api : ",(0,a.kt)("a",{parentName:"li",href:"https://api.open-meteo.com/v1/forecast?latitude=38&longitude=123&current=temperature_2m&hourly=temperature_2m&daily=sunrise,sunset&timezone=auto"},"https://api.open-meteo.com/v1/forecast?latitude=38&longitude=123","\xa4","t=temperature_2m&hourly=temperature_2m&daily=sunrise,sunset&timezone=auto"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'  const result = await streamText({\n    model: customModel(model.apiIdentifier),\n    system: systemPrompt,\n    messages: coreMessages,\n    maxSteps: 5,\n    experimental_activeTools: allTools,\n    tools: {\n      getWeather: {\n        description: "Get the current weather at a location",\n        // zod \uc758 \uc2a4\ud0a4\ub9c8 \uc815\uc758\ub97c \ud30c\ub77c\ubbf8\ud130\uc5d0 \ub123\ub294\ub2e4.  \n        parameters: z.object({\n          latitude: z.number(),\n          longitude: z.number(),\n        }),\n        execute: async ({ latitude, longitude }) => {\n          const response = await fetch(\n            `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m&hourly=temperature_2m&daily=sunrise,sunset&timezone=auto`\n          );\n\n          const weatherData = await response.json();\n          return weatherData;\n        },\n      },\n')),(0,a.kt)("h2",{id:"eg-streamobject"},"eg) streamObject"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'const { elementStream } = await streamObject({\n  model: customModel(model.apiIdentifier),\n  system:\n    "You are a help writing assistant. Given a piece of writing, please offer suggestions to improve the piece of writing and describe the change. It is very important for the edits to contain full sentences instead of just words. Max 5 suggestions.",\n  prompt: document.content,\n  output: "array",\n  schema: z.object({\n    originalSentence: z.string().describe("The original sentence"),\n    suggestedSentence: z.string().describe("The suggested sentence"),\n    description: z\n      .string()\n      .describe("The description of the suggestion"),\n  }),\n});\n')),(0,a.kt)("h2",{id:"eg-refine-filetype"},"eg) refine, filetype"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"refine : \uc815\uc81c\ud558\ub2e4 ( \ud30c\uc77c\uc758 \uc6a9\ub7c9, \uc774\ubbf8\uc9c0 \ud0c0\uc785 \ub4f1 \uc815\uc758\uac00\ub2a5)  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// Use Blob instead of File since File is not available in Node.js environment\nconst FileSchema = z.object({\n  file: z\n    .instanceof(Blob)\n    .refine((file) => file.size <= 5 * 1024 * 1024, {\n      message: "File size should be less than 5MB",\n    })\n    // Update the file type based on the kind of files you want to accept\n    .refine((file) => ["image/jpeg", "image/png"].includes(file.type), {\n      message: "File type should be JPEG or PNG",\n    }),\n});\n\n')))}m.isMDXComponent=!0}}]);