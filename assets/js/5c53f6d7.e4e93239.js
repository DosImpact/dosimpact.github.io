"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[8232],{3905:(n,e,t)=>{t.d(e,{Zo:()=>u,kt:()=>k});var r=t(67294);function p(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){p(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,r,p=function(n,e){if(null==n)return{};var t,r,p={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(p[t]=n[t]);return p}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(p[t]=n[t])}return p}var s=r.createContext({}),i=function(n){var e=r.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):a(a({},e),n)),t},u=function(n){var e=i(n.components);return r.createElement(s.Provider,{value:e},n.children)},c="mdxType",d={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},m=r.forwardRef((function(n,e){var t=n.components,p=n.mdxType,o=n.originalType,s=n.parentName,u=l(n,["components","mdxType","originalType","parentName"]),c=i(t),m=p,k=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return t?r.createElement(k,a(a({ref:e},u),{},{components:t})):r.createElement(k,a({ref:e},u))}));function k(n,e){var t=arguments,p=e&&e.mdxType;if("string"==typeof n||p){var o=t.length,a=new Array(o);a[0]=m;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l[c]="string"==typeof n?n:p,a[1]=l;for(var i=2;i<o;i++)a[i]=t[i];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},96871:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>i});var r=t(87462),p=(t(67294),t(3905));const o={sidebar_position:2},a="Monorepo Turborepo + pnpm + tsup",l={unversionedId:"g-fe/npm/turbo/turebo3",id:"g-fe/npm/turbo/turebo3",title:"Monorepo Turborepo + pnpm + tsup",description:"- Monorepo Turborepo + pnpm + tsup",source:"@site/docs/g-fe/8-npm/4-turbo/turebo3.md",sourceDirName:"g-fe/8-npm/4-turbo",slug:"/g-fe/npm/turbo/turebo3",permalink:"/docs/g-fe/npm/turbo/turebo3",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-fe/8-npm/4-turbo/turebo3.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"frontEnd",previous:{title:"eg - Monorepo Turborepo",permalink:"/docs/g-fe/npm/turbo/turebo2"},next:{title:"Bundler",permalink:"/docs/category/bundler"}},s={},i=[{value:"Goal",id:"goal",level:2},{value:"\ud83d\udccc pnpm + monorepo",id:"-pnpm--monorepo",level:2},{value:"pnpm \uba85\ub839\uc5b4 \uc815\ub9ac",id:"pnpm-\uba85\ub839\uc5b4-\uc815\ub9ac",level:3},{value:"workspace",id:"workspace",level:3},{value:"turbo \uc8fc\uc694 \uba85\ub839\uc5b4",id:"turbo-\uc8fc\uc694-\uba85\ub839\uc5b4",level:2},{value:"Setup tsup",id:"setup-tsup",level:2},{value:"Setup tsup (Single Entry)",id:"setup-tsup-single-entry",level:3},{value:"Setup tsup (Multiple Entry)",id:"setup-tsup-multiple-entry",level:3},{value:"Setup tsup with bin script (npx cli)",id:"setup-tsup-with-bin-script-npx-cli",level:3},{value:"Local test",id:"local-test",level:2},{value:"Test in another project",id:"test-in-another-project",level:3},{value:"publish to npm regitry",id:"publish-to-npm-regitry",level:2},{value:"download from npm registry",id:"download-from-npm-registry",level:2}],u={toc:i},c="wrapper";function d(n){let{components:e,...t}=n;return(0,p.kt)(c,(0,r.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,p.kt)("h1",{id:"monorepo-turborepo--pnpm--tsup"},"Monorepo Turborepo + pnpm + tsup"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#monorepo-turborepo--pnpm--tsup"},"Monorepo Turborepo + pnpm + tsup"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#goal"},"Goal")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#-pnpm--monorepo"},"\ud83d\udccc pnpm + monorepo"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#pnpm-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A0%95%EB%A6%AC"},"pnpm \uba85\ub839\uc5b4 \uc815\ub9ac")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#workspace"},"workspace")))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#turbo-%EC%A3%BC%EC%9A%94-%EB%AA%85%EB%A0%B9%EC%96%B4"},"turbo \uc8fc\uc694 \uba85\ub839\uc5b4")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#setup-tsup"},"Setup tsup"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#setup-tsup-single-entry"},"Setup tsup (Single Entry)")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#setup-tsup-multiple-entry"},"Setup tsup (Multiple Entry)")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#setup-tsup-with-bin-script-npx-cli"},"Setup tsup with bin script (npx cli)")))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#local-test"},"Local test"),(0,p.kt)("ul",{parentName:"li"},(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#test-in-another-project"},"Test in another project")))),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#publish-to-npm-regitry"},"publish to npm regitry")),(0,p.kt)("li",{parentName:"ul"},(0,p.kt)("a",{parentName:"li",href:"#download-from-npm-registry"},"download from npm registry"))))),(0,p.kt)("h2",{id:"goal"},"Goal"),(0,p.kt)("p",null,"Goal : \ubaa8\ub178\ub808\ud3ec\ub85c \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc0f \ud504\ub85c\uc81d\ud2b8\ub97c \uad00\ub9ac\ud55c\ub2e4.  "),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"Tools : turbo, pnpm, tsup, storybook, typescript, eslint, jest  ")),(0,p.kt)("p",null,"Tasks  "),(0,p.kt)("ul",{className:"contains-task-list"},(0,p.kt)("li",{parentName:"ul",className:"task-list-item"},(0,p.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","turbo repo \uc2dc\uc791\ud558\uae30  "),(0,p.kt)("li",{parentName:"ul",className:"task-list-item"},(0,p.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","pnpm \uba85\ub839\uc5b4 \uc815\ub9ac \ubc0f \uc758\uc874\uc131 \ud655\uc778\ud558\uae30  "),(0,p.kt)("li",{parentName:"ul",className:"task-list-item"},(0,p.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","tsup \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc30\ud3ec \ud658\uacbd \ubc0f turbo \uba85\ub839\uc5b4\ub85c \uac1c\ubc1c\ud658\uacbd \uad6c\ucd95  ")),(0,p.kt)("p",null,"Ref"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"Vercel Examples : ",(0,p.kt)("a",{parentName:"li",href:"https://github.com/vercel/turborepo/blob/main/examples"},"https://github.com/vercel/turborepo/blob/main/examples"))),(0,p.kt)("h2",{id:"-pnpm--monorepo"},"\ud83d\udccc pnpm + monorepo"),(0,p.kt)("h3",{id:"pnpm-\uba85\ub839\uc5b4-\uc815\ub9ac"},"pnpm \uba85\ub839\uc5b4 \uc815\ub9ac"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// 1.\uc124\uce58\npnpm i\n// 1.1 -r \n// -r\uc740 \ubaa8\ub4e0 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4\ub97c \uc21c\ud658\uc2dc\ucf1c\uc8fc\ub294 \uba85\ub839\uc5b4 \uc774\ub2e4. \uc544\ub798\ucc98\ub7fc \ubaa8\ub4e0 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4 \ub9c8\ub2e4 pnpm i \uba85\ub839\uc5b4 \uc2e4\ud589\n// \ud558\uc9c0\ub9cc \ud2b9\ubcc4\ud788 \ubaa8\ub178\ub808\ud3ec\uc758 \uacbd\uc6b0, \ub8e8\ud2b8\uc5d0\uc11c pnpm i\uc73c\ub85c\ub9cc \ucda9\ubd84\npnpm i -r\n\n// 2.\ubaa8\ub178\ub808\ud3ec\uc758 \uc758\uc874\uc131 link\n// 2.1 \ub85c\uceec \uc758\uc874\uc131 \uc124\uce58\ud558\ub294 \ubc29\ubc95  \npnpm add package-name  \npnpm add package-name -D  \n// 2.2 \uc5ec\ub7ec \ub808\ud3ec\uc5d0 \ud55c\ubc88\uc5d0 \uc758\uc874\uc131 \ub9c1\ud06c\ud558\uae30  \npnpm add @org/ui --filter apps/web  \n// 2.3 \uc218\ub3d9\uc73c\ub85c \uc124\uce58\ud558\uae30\n- "@org/ui":"workspace:*" -> pnpm i  \n\n// 2.4 \uc758\uc874\uc131 \ub9c1\ud06c \ud655\uc778  \npnpm list  \n\n// \ucc38\uace0\npnpm link package-name  // \uc758\uc874\uc131 \ub9c1\ud06c \ub9cc\ub4e4\uae30 \npnpm unlink package-name // \uc758\uc874\uc131 \ub9c1\ud06c \uc81c\uac70  \npnpm list // \ud604\uc7ac \uc758\uc874\uc131 \ub9ac\uc2a4\ud2b8  \n\n// 3.\uae00\ub85c\ubc8c \uc758\uc874\uc131 \ub9cc\ub4e4\uae30\n// \ub85c\uceec\uc758 \uc758\uc874\uc131\uc744 \ub2e4\ub978 \ub808\ud3ec\uc5d0\uc11c \ud14c\uc2a4\ud2b8 \ud560\uc218 \uc788\ub2e4.  \npnpm link --global              // (\ub85c\uceec\ubaa8\ub4c8) \uae00\ub85c\ubc8c \ub9c1\ud06c \ub9cc\ub4e4\uae30\npnpm link package-name --global // (test) \uae00\ub85c\ubc8c\uc758 \ub85c\uceec\ubaa8\ub4c8\uc744 test \ub808\ud3ec\uc5d0 \uc124\uce58(\ud558\ub4dc \ub9c1\ud06c \ubc29\uc2dd)   \n//? pnpm list --global              // (test) \ub9c1\ud06c \ud655\uc778  \npnpm unlink --global            // (\ub85c\uceec\ubaa8\ub4c8) \uae00\ub85c\ubc8c \ub9c1\ud06c \uc81c\uac70\n\n// \uce90\uc2dc \ud074\ub9ac\uc5b4 \npnpm store prune \n\n// \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4 \uba85\ub839\uc5b4\npnpm install -r  \n// \ubaa8\ub4e0 \uc6cc\ud06c\uc2a4\ud398\uc774\uc2a4\uc5d0\uc11c node_modules \uc81c\uac70\ud558\uae30  \npnpm -r exec rm -rf node_mouldes  \n\n// \uc758\uc874\uc131 \uc81c\uac70, \uc5c5\ub370\uc774\ud2b8\npnpm remove \npnpm update \n\n// script \uc218\ud589 \npnpm run script-name  \n')),(0,p.kt)("h3",{id:"workspace"},"workspace"),(0,p.kt)("p",null,"\ubaa8\ub178\ub808\ud3ec\ub294 node \uc9c4\uc601\uc5d0\uc11c\ub294 workspace\ub77c\ub294 \uac1c\ub150\uc73c\ub85c \ud1b5\ud55c\ub2e4.  "),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"pnpm-workspace.yaml \ud30c\uc77c \uc0dd\uc131  ")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},'packages:\n  - "packages/*"\n  - "apps/*"\n')),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"turbo.json \ud30c\uc77c \uc0dd\uc131  ")),(0,p.kt)("h2",{id:"turbo-\uc8fc\uc694-\uba85\ub839\uc5b4"},"turbo \uc8fc\uc694 \uba85\ub839\uc5b4"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"turbo run <task>: \uc9c0\uc815\ub41c \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\nturbo run dev --filter=reco-common-ui --ui\n\nturbo dev: \uac1c\ubc1c \ubaa8\ub4dc\uc5d0\uc11c \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\nturbo build: \ube4c\ub4dc \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\nturbo lint: \ub9b0\ud2b8 \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\nturbo test: \ud14c\uc2a4\ud2b8 \uc791\uc5c5\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\nturbo prune: \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294 \ud328\ud0a4\uc9c0\ub97c \uc81c\uac70\ud569\ub2c8\ub2e4.\nturbo clean: \uce90\uc2dc\uc640 \ube4c\ub4dc \uc544\ud2f0\ud329\ud2b8\ub97c \uc815\ub9ac\ud569\ub2c8\ub2e4.\n")),(0,p.kt)("h2",{id:"setup-tsup"},"Setup tsup"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'export const tsup: Options = {\n  entry: [\'src/**/*.tsx\', \'src/**/*.ts\', \'src/**/*.css\'],\n  outDir: \'dist\',\n  format: [\'cjs\', \'esm\'],\n  target: \'es2015\',\n  dts: true,\n  bundle: true,\n  splitting: false,\n  clean: true,\n  skipNodeModulesBundle: true,\n  sourcemap: true,\n  minify:false,\n  watch: env === \'development\',\n};\n---\npackage.json\n  "type": "module",\n  "main": "dist/index.cjs",\n  "module": "dist/index.js",\n  "types": "dist/index.d.ts",\n  "exports": {\n    ".": {\n      "require": {\n        "types": "./dist/index.d.cts",\n        "default": "./dist/index.cjs"\n      },\n      "import": {\n        "types": "./dist/index.d.ts",\n        "default": "./dist/index.js"\n      }\n    }\n  },\n')),(0,p.kt)("h3",{id:"setup-tsup-single-entry"},"Setup tsup (Single Entry)"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// 0.src/index.ts  \n// \ubc30\ub7f4 \ud30c\uc77c\uc5d0\uc11c\ub294 \uc774\ub984\uc774 \uacb9\uce60 \uc218 \uc788\ub2e4. renamed & re-export \ud558\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud55c\ub2e4.\n// export * from \'./calcuator/index.js\';\n// export * from \'./calcuator-v2/index.js\';\n\nimport * as CalculatorV1 from \'./calcuator/index.js\';\nimport * as CalculatorV2 from \'./calcuator-v2/index.js\';\n\nexport { CalculatorV1, CalculatorV2 };\n\n\n// 1.\n// tsup.config.ts\nimport { defineConfig } from \'tsup\';\n\nconst env = process.env.NODE_ENV;\n\nexport default defineConfig({\n  // entry \ub294 \ud3ec\ud568\ud560 \ud30c\uc77c \ubaa9\ub85d\uc774\ub2e4. \ubaa8\ub4c8\ub178\ucd9c\uc740 package.json \uc5d0\uc11c \uc9c4\ud589\ud55c\ub2e4.   \n  entry: [\'src/**/*.ts\'], // glob \ud328\ud134 \uc0ac\uc6a9\n  outDir: \'dist\', // \ucd9c\ub825 \ub514\ub809\ud1a0\ub9ac\n  format: [\'cjs\', \'esm\'], // CommonJS\uc640 ESM \ud615\uc2dd \ucd9c\ub825\n  dts: true, // \ud0c0\uc785 \uc120\uc5b8 \ud30c\uc77c \uc0dd\uc131\n  sourcemap: env === \'development\', // \uc18c\uc2a4\ub9f5 \uc0dd\uc131\n  target: \'es2015\',\n  /* optimization */\n  minify: true, // \ucf54\ub4dc \ucd5c\uc18c\ud654 \uc5ec\ubd80\n  bundle: true,\n  splitting: false,\n  skipNodeModulesBundle: true,\n  /* dev */\n  clean: true, // \ube4c\ub4dc \uc804\uc5d0 \ub514\ub809\ud1a0\ub9ac \uc815\ub9ac\n  watch: env === \'development\',\n});\n\n---\n// 2.\n// package.json\n{\n  "name": "@dodo/blocks",\n  "version": "0.0.1",\n  "description": "",\n  "scripts": {\n    "dev": "NODE_ENV=development tsup",\n    "build": "NODE_ENV=production tsup",\n    "npm-publihs": ""\n  },\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "type": "module",\n  "exports": {\n    "./calcuator": {\n      "require": {\n        "types": "./dist/calcuator/index.d.cts",\n        "default": "./dist/calcuator/index.cjs"\n      },\n      "import": {\n        "types": "./dist/calcuator/index.d.ts",\n        "default": "./dist/calcuator/index.js"\n      }\n    },\n    "./calcuator-v2": {\n      "require": {\n        "types": "./dist/calcuator-v2/index.d.cts",\n        "default": "./dist/calcuator-v2/index.cjs"\n      },\n      "import": {\n        "types": "./dist/calcuator-v2/index.d.ts",\n        "default": "./dist/calcuator-v2/index.js"\n      }\n    }\n  },\n  "devDependencies": {\n    "@repo/eslint-config": "workspace:*",\n    "@repo/typescript-config": "workspace:*",\n    "@turbo/gen": "^1.12.4",\n    "@types/node": "^20.11.24",\n    "@types/eslint": "^8.56.5",\n    "@types/react": "^18.2.61",\n    "@types/react-dom": "^18.2.19",\n    "eslint": "^8.57.0",\n    "react": "^18.2.0",\n    "typescript": "5.5.4",\n    "tsup": "^8.3.5"\n  }\n}\n\n//3.tsconfig.json\n{\n  "extends": "@repo/typescript-config/react-library.json",\n  "compilerOptions": {\n    "outDir": "dist"\n  },\n  "include": ["src"],\n  "exclude": ["node_modules", "dist"]\n}\n')),(0,p.kt)("h3",{id:"setup-tsup-multiple-entry"},"Setup tsup (Multiple Entry)"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"\ub2e8\uc810 : \ubaa8\ub4c8\uc774 \ub298\uc5b4\ub0a0\ub54c\ub9c8\ub2e4 \ubca0\uc774\uc2a4 \ucf54\ub4dc\uc791\uc5c5\uc744 \ud574\uc57c\ud55c\ub2e4.  ")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// 1.src/index.ts  \nexport * from \'./calcuator/index.js\';\nexport * from \'./calcuator-v2/index.js\';\n\n\n\n// 2.\n// package.json\n{\n  "name": "@dodo/blocks",\n  "version": "0.0.1",\n  "description": "",\n  "scripts": {\n    "dev": "NODE_ENV=development tsup",\n    "build": "NODE_ENV=production tsup",\n    "npm-publihs": ""\n  },\n  "keywords": [],\n  "author": "",\n  "license": "ISC",\n  "type": "module",\n  "exports": {\n    "./calcuator": {\n      "require": {\n        "types": "./dist/calcuator/index.d.cts",\n        "default": "./dist/calcuator/index.cjs"\n      },\n      "import": {\n        "types": "./dist/calcuator/index.d.ts",\n        "default": "./dist/calcuator/index.js"\n      }\n    },\n    "./calcuator-v2": {\n      "require": {\n        "types": "./dist/calcuator-v2/index.d.cts",\n        "default": "./dist/calcuator-v2/index.cjs"\n      },\n      "import": {\n        "types": "./dist/calcuator-v2/index.d.ts",\n        "default": "./dist/calcuator-v2/index.js"\n      }\n    }\n  },\n  "devDependencies": {\n    "@repo/eslint-config": "workspace:*",\n    "@repo/typescript-config": "workspace:*",\n    "@turbo/gen": "^1.12.4",\n    "@types/node": "^20.11.24",\n    "@types/eslint": "^8.56.5",\n    "@types/react": "^18.2.61",\n    "@types/react-dom": "^18.2.19",\n    "eslint": "^8.57.0",\n    "react": "^18.2.0",\n    "typescript": "5.5.4",\n    "tsup": "^8.3.5"\n  }\n}\n\n')),(0,p.kt)("h3",{id:"setup-tsup-with-bin-script-npx-cli"},"Setup tsup with bin script (npx cli)"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\n// src/scripts/indext.ts\n\n#!/usr/bin/env node\n\nimport { Command } from 'commander';\n\nconst program = new Command();\n\nprogram\n  .name('@dodolabs/blocks')\n  .description('CLI tool for math operations')\n  .version('1.0.0');\n\n// `adder` \uba85\ub839\uc5b4 \uc815\uc758\nprogram\n  .command('adder')\n  .description('Add two numbers')\n  .option('--a <number>', 'First number', '0')\n  .option('--b <number>', 'Second number', '0')\n  .action((options) => {\n    const a = parseFloat(options.a);\n    const b = parseFloat(options.b);\n    console.log(`Result: ${a + b}`);\n  });\n\n// \uba85\ub839\uc5b4 \ud30c\uc2f1\nprogram.parse(process.argv);\n\n// 2.package.json\n// add bin field  \n  \"bin\": {\n    \"@dodolabs/blocks\": \"./dist/scripts/index.js\"\n  },\n\n// 3.build\n// \"build\": \"NODE_ENV=production tsup\",\n\n// 4.Local Test in inside Module \nnode ./dist/scripts/index.js\n\n// \ud83d\udcd5 \ud604\uc7ac \uc120\uc5b8\ub41c \ubaa8\ub4c8\uc774 type:\"module\" \uc774\ubbc0\ub85c ESM \uc2a4\ud06c\ub9bd\uc73c\ub97c \uad6c\ub3d9\ud55c\ub2e4.  \n\n// 5.Local test in outside Module  \n// pnpm link --global  \n// pnpm link @dodolabs/blocks --global  \n// npx @dodolabs/blocks adder --a=1 --b=2  \n// pnpm unlink @dodolabs/blocks --global    \n\n// 6.publish  \n    \"npm-publish\": \"pnpm build && npm publish\"\n\n")),(0,p.kt)("h2",{id:"local-test"},"Local test"),(0,p.kt)("h3",{id:"test-in-another-project"},"Test in another project"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},"// 1.\n// pnpm setup \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uc5ec pnpm\uc774 \uc790\ub3d9\uc73c\ub85c \uc804\uc5ed \ubc14\uc774\ub108\ub9ac \ub514\ub809\ud1a0\ub9ac\ub97c \uc124\uc815\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4.\npnpm setup\nsource ~/.zshrc \n\n// 2.\n// \ub85c\uceec\ubaa8\ub4c8\uc5d0\uc11c \uae00\ub85c\ubc8c \ub9c1\ud06c \ub9cc\ub4e4\uae30  \npnpm link --global\n\n// 3.\n// \ud14c\uc2a4\ud2b8 \ub808\ud3ec\ub85c \uac00\uc11c \ubc29\uae08 \ub9cc\ub4e0 \ub85c\uceec \ubaa8\ub4c8 \uc5f0\uacb0\ud558\uae30  \n// pnpm install \uc740 \ud544\uc694\uc5c6\ub2e4.  \npnpm link --global @dodo/blocks\n//\ud655\uc778\ud574\ubcf4\uae30 (\uc798\uc548\ub41c\ub2e4.?)\npnpm list\n\n// 4. \ud14c\uc2a4\ud2b8 \ud6c4 \ub9c1\ud06c\uc81c\uac70\npnpm unlink --global @dodo/blocks\n\n")),(0,p.kt)("p",null,"cjs test"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"change package.json type to commonjs")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'\nconst { adder } = require("@dodo/blocks/calcuator-v2");\n\nconsole.log(typeof module !== "undefined" ? "CommonJS" : "ES Module"); // CommonJS\n\nconsole.log(adder(1, 2));\n\n')),(0,p.kt)("p",null,"mjs test"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"change package.json type to module")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-js"},'// ---\n\nimport { adder } from "@dodo/blocks/calcuator-v2";\n\n// module \uc774\ub77c\ub294 \uc804\uc5ed \uac1d\uccb4\uac00 \uc874\uc7ac\ud55c\ub2e4.\nconsole.log(typeof module !== "undefined" ? "CommonJS" : "ES Module"); // ES Module\n\nconsole.log(adder(1, 2));\n\n')),(0,p.kt)("h2",{id:"publish-to-npm-regitry"},"publish to npm regitry"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"// 1.\n\uc544\ub798\uc640 \uac19\uc774 \ub0b4 \uacc4\uc815\uc774\ub984\uacfc \ub2e4\ub978 \uc811\ub450\uc0ac\ub97c \uac00\uc9c4 \ud328\ud0a4\uc9c0\ub97c \ubc30\ud3ec\ud558\ub824\uba74 \uc870\uc9c1\uc744 \ub9cc\ub4e4\uc5b4\uc57c \ud55c\ub2e4.  \n- @dodolabs/blocks\n- npm registry\uc5d0\uc11c \uc870\uc9c1\uc744 \ub9cc\ub4e4\uc790.   \n\n// 2.\nnpm login  \n\n// 3.\nnpm publish\n\n")),(0,p.kt)("h2",{id:"download-from-npm-registry"},"download from npm registry"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"pnpm i @dodolabs/blocks\n")))}d.isMDXComponent=!0}}]);