"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[6602],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>_});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=r.createContext({}),p=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(i.Provider,{value:n},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),u=o,_=d["".concat(i,".").concat(u)]||d[u]||m[u]||a;return t?r.createElement(_,l(l({ref:n},c),{},{components:t})):r.createElement(_,l({ref:n},c))}));function _(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,l=new Array(a);l[0]=u;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[d]="string"==typeof e?e:o,l[1]=s;for(var p=2;p<a;p++)l[p]=t[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},4641:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=t(7462),o=(t(7294),t(3905));const a={sidebar_position:2},l="Nginx \ud658\uacbd\uc124\uc815 (Proxy)",s={unversionedId:"g-devops/common/nginx/nginx-002",id:"g-devops/common/nginx/nginx-002",title:"Nginx \ud658\uacbd\uc124\uc815 (Proxy)",description:"Nginx\uc744 Proxy\uc73c\ub85c \ub3c4\uba54\uc778\uc744 \uc5f0\uacb0\ud574\uc11c \uc0ac\uc6a9\ud55c\ub2e4.",source:"@site/docs/g-devops/0-common/2-nginx/nginx-002.md",sourceDirName:"g-devops/0-common/2-nginx",slug:"/g-devops/common/nginx/nginx-002",permalink:"/docs/g-devops/common/nginx/nginx-002",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-devops/0-common/2-nginx/nginx-002.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"devOps",previous:{title:"Nginx \uc124\uce58",permalink:"/docs/g-devops/common/nginx/nginx-001"},next:{title:"Docker",permalink:"/docs/category/docker"}},i={},p=[{value:"nginx \uc124\uc815 \ud30c\uc77c\uc758 \uad6c\uc870",id:"nginx-\uc124\uc815-\ud30c\uc77c\uc758-\uad6c\uc870",level:2},{value:"\ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d",id:"\ub514\ud3f4\ud2b8-\uc11c\ubc84-\ube14\ub85d",level:2},{value:"\ub3c4\uba54\uc778\ubcc4 \ubd84\uae30 \ucc98\ub9ac",id:"\ub3c4\uba54\uc778\ubcc4-\ubd84\uae30-\ucc98\ub9ac",level:2},{value:"https\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ucc98\ub9ac",id:"https\ub85c-\ub9ac\ub2e4\uc774\ub809\uc158-\ucc98\ub9ac",level:2},{value:"\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \uc815\uc801\ud30c\uc77c\ub4e4 \uc81c\uacf5\ud558\uae30",id:"\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\uc815\uc801\ud30c\uc77c\ub4e4-\uc81c\uacf5\ud558\uae30",level:2},{value:"\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \ud2b9\uc815 \ud30c\uc77c \uc81c\uacf5\ud558\uae30",id:"\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\ud2b9\uc815-\ud30c\uc77c-\uc81c\uacf5\ud558\uae30",level:2},{value:"\uc608) Nginx + CodeServer (https)",id:"\uc608-nginx--codeserver-https",level:2},{value:"\uc124\uc815\ud30c\uc77c \ubd84\ub9ac\ud558\uae30",id:"\uc124\uc815\ud30c\uc77c-\ubd84\ub9ac\ud558\uae30",level:2},{value:"\uae30\ud0c0 \uc124\uc815\ub4e4",id:"\uae30\ud0c0-\uc124\uc815\ub4e4",level:2},{value:"client_max_body_size",id:"client_max_body_size",level:3},{value:"access_log, error_log",id:"access_log-error_log",level:3}],c={toc:p},d="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(d,(0,r.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"nginx-\ud658\uacbd\uc124\uc815-proxy"},"Nginx \ud658\uacbd\uc124\uc815 (Proxy)"),(0,o.kt)("p",null,"Nginx\uc744 Proxy\uc73c\ub85c \ub3c4\uba54\uc778\uc744 \uc5f0\uacb0\ud574\uc11c \uc0ac\uc6a9\ud55c\ub2e4.  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\ub530\ub77c\uc11c \ub3c4\uba54\uc778\uc774 \uc5c6\uc73c\uba74 ping \uc751\ub2f5\ub9cc \uc8fc\ub3c4\ub85d \ubc14\uafb8\uc790.  ")),(0,o.kt)("h2",{id:"nginx-\uc124\uc815-\ud30c\uc77c\uc758-\uad6c\uc870"},"nginx \uc124\uc815 \ud30c\uc77c\uc758 \uad6c\uc870"),(0,o.kt)("p",null,"nginx \uc124\uc815\ud30c\uc77c\uc740 \uc5ec\ub7ec\uac1c\uc758 \uc11c\ubc84 \ube14\ub85d\ub4e4\ub85c \uad6c\uc131\ub41c\ub2e4.",(0,o.kt)("br",{parentName:"p"}),"\n","\uc11c\ubc84 \ube14\ub85d\uc740 \ud2b9\uc815 \ud3ec\ud2b8\ub098, \ub3c4\uba54\uc778\uc744 \ub9cc\uc871\ud560 \ub54c \ucc98\ub9ac\ud560 \ubd84\uae30\ubb38\uc774\ub77c\uace0 \ubcf4\uba74\ub41c\ub2e4.",(0,o.kt)("br",{parentName:"p"}),"\n","\ud558\ub098\uc758 \ub8e8\ud2b8 \uc124\uc815\ud30c\uc77c\uacfc \ud568\uaed8 \ub3c4\uba54\uc778\ubcc4 \ud558\uc704 \uc124\uc815\ud30c\uc77c\ub4e4\ub85c \uad6c\uc131"),(0,o.kt)("p",null,"\uc11c\ubc84\ube14\ub85d \ub85c\uc9c1\uc744 \ud0dc\uc6b0\ub294 \uc870\uac74\ub4e4"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"listen 80; \ud3ec\ud2b8 \uc870\uac74  "),(0,o.kt)("li",{parentName:"ul"},"server_name ",(0,o.kt)("a",{parentName:"li",href:"http://www.domain.com"},"www.domain.com"),"; \ub3c4\uba54\uc778 \uc870\uac74")),(0,o.kt)("h2",{id:"\ub514\ud3f4\ud2b8-\uc11c\ubc84-\ube14\ub85d"},"\ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d"),(0,o.kt)("p",null,"\uc5b4\ub5a0\ud55c \uc11c\ubc84\ube14\ub85d\uc5d0\ub3c4 \uac78\ub9ac\uc9c0 \uc54a\ub294 \uacbd\uc6b0, \ucc98\ub9ac\ud558\ub294 \ube14\ub85d\uc774 \ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d\uc774\ub2e4.  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\uacf5\uc778 IP\ub85c \uc9c1\uc811 \uc811\uadfc\ud558\ub294 \uacbd\uc6b0  "),(0,o.kt)("li",{parentName:"ul"},"DDNS\ub85c \uc9c1\uc811 \uc811\uadfc\ud558\ub294 \uacbd\uc6b0  "),(0,o.kt)("li",{parentName:"ul"},"\ud2b9\uc815 \uc11c\ubc84\ube14\ub85d\uc5d0 \uac78\ub9ac\uc9c0 \uc54a\ub294 \uacbd\uc6b0\n\ub4f1 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ucd5c\ud6c4\uc758 \uc11c\ubc84 \ube14\ub85d\uc774\ub2e4.  ")),(0,o.kt)("p",null,"\uc8fc\uc758\uc810"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\ub514\ud3f4\ud2b8 \ube14\ub85d\uc774 \uc5c6\ub2e4\uba74 \uac00\uc7a5 \uccab\ubc88\uc9f8 \ube14\ub85d\uc73c\ub85c \uc790\ub3d9\uc73c\ub85c \ucc98\ub9ac\uac00 \ub41c\ub2e4.      "),(0,o.kt)("li",{parentName:"ul"},"\ube0c\ub77c\uc6b0\uc800 \ucc3d\uc5d0\uc11c \ub3c4\uba54\uc778\uc744 \ubc14\ub85c \uc785\ub825\ud558\uba74, https\ub85c \ucc98\ub9ac\ub41c\ub2e4.  ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'worker_processes  1;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    server {\n        listen 80 default_server;\n        # listen 443 ssl default_server;\n        # warn: If you enter domain.com in the browser search box, \n        # it will be displayed as https, and since there is no server block that handles nginx\'s default 443, \n        # it may branch to a different domain server block than expected.\n\n        # _\ub294 \uae00\ub85c\ubc8c \uc2dd\ubcc4\uc790\uc774\ub2e4.\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        # \uc5b4\ub5a0\ud55c \uc11c\ubc84 \ube14\ub85d\uc5d0\ub77c\ub3c4 \uac78\ub9ac\uc9c0 \uc54a\uc73c\uba74 ok\ub97c \ubcf4\ub0b8\ub2e4.  \n        location / {\n            return 200 "ok";\n        }\n    }\n}\n')),(0,o.kt)("h2",{id:"\ub3c4\uba54\uc778\ubcc4-\ubd84\uae30-\ucc98\ub9ac"},"\ub3c4\uba54\uc778\ubcc4 \ubd84\uae30 \ucc98\ub9ac"),(0,o.kt)("p",null,"\uc544\ub798 \uc11c\ubc84 \ube14\ub85d\uc740 domain.com \ub77c\ub294 \ud2b9\uc815 \ub3c4\uba54\uc778\uc758 \uacbd\uc6b0\uc5d0 \ubc18\uc751\ud55c\ub2e4.  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"proxy_pass\ub97c \ud1b5\ud574\uc11c \ud504\ub85c\uc138\uc2a4\uc640 \uc5f0\ub3d9\uc774 \uac00\ub2a5\ud558\ub2e4.  "),(0,o.kt)("li",{parentName:"ul"},"code-server \ub4e0, docker container\ub4e0 \ud3ec\ud2b8\ub97c \uc801\uc5b4\uc8fc\uc790.  "),(0,o.kt)("li",{parentName:"ul"},"server_name\uc5d0 \uc870\uac74\uc5d0 \ub9de\ub294 \ub3c4\uba54\uc778\uc744 \uc801\uc5b4\uc900\ub2e4. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"server {\n    listen 80 ;\n    server_name domain.com;\n\n    location / {  \n        proxy_pass http://127.0.0.1:3031/;\n    }\n}\n\n")),(0,o.kt)("p",null,"\uc608) domain.com \uc811\uc18d\uc2dc \ub9ac\uc561\ud2b8 App \uc2e4\ud589  "),(0,o.kt)("h2",{id:"https\ub85c-\ub9ac\ub2e4\uc774\ub809\uc158-\ucc98\ub9ac"},"https\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ucc98\ub9ac"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"http\ub85c \uc811\uadfc\ud558\uba74 80\ud3ec\ud2b8\uc774\ub2e4. https\ub294 443\uc774\ub2e4.  "),(0,o.kt)("li",{parentName:"ul"},"80\ud3ec\ud2b8\uc774\uba74 HTTPS\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ud558\ub294 \uc11c\ubc84\ube14\ub85d\uc774\ub2e4. "),(0,o.kt)("li",{parentName:"ul"},"server_name\uc5d0 \uc870\uac74\uc5d0 \ub9de\ub294 \ub3c4\uba54\uc778\uc744 \uc801\uc5b4\uc900\ub2e4. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"server {\n    listen 80 ;\n    server_name domain.com;\n\n    location / {  \n        # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n        return 301 https://$host$request_uri;\n    }\n}\n")),(0,o.kt)("p",null,"\uc608) domain.com \uc811\uc18d\uc2dc https\ub85c \ub9ac\uc561\ud2b8 App \uc2e4\ud589  "),(0,o.kt)("h2",{id:"\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\uc815\uc801\ud30c\uc77c\ub4e4-\uc81c\uacf5\ud558\uae30"},"\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \uc815\uc801\ud30c\uc77c\ub4e4 \uc81c\uacf5\ud558\uae30"),(0,o.kt)("p",null,"\ub4b7\ub2e8\uc758 \uc11c\ube44\uc2a4\uae4c\uc9c0 \uc5f0\uacb0\ud558\uc9c0 \uc54a\uace0, nginx \ub2e8\uc5d0\uc11c \ud30c\uc77c\uc744 \uc81c\uacf5\ud558\uace0 \ub05d\ub0b4\uace0 \uc2f6\uc740 \uacbd\uc6b0\uac00 \uc788\ub2e4.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    server {\n        listen 80 ;\n        server_name www.domain.com;\n\n        location /.well-known/acme-challenge {\n            alias /opt/homebrew/etc/nginx/.well-known/acme-challenge; # \uc2e4\uc81c \ud30c\uc77c\uc774 \uc704\uce58\ud55c \uacbd\ub85c\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n            try_files $uri $uri/ /opt/homebrew/etc/nginx/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB; # \ud2b9\uc815 \ud30c\uc77c\uba85\uc744 \uc5ec\uae30\uc5d0 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n        }\n\n        location / {  # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n            return 301 https://$host$request_uri;\n        }\n    }\n")),(0,o.kt)("p",null,"\uc608)\n",(0,o.kt)("a",{parentName:"p",href:"https://www.domain.com/.well-known/acme-challenge"},"https://www.domain.com/.well-known/acme-challenge")," -> Not found.\n",(0,o.kt)("a",{parentName:"p",href:"https://www.domain.com/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB"},"https://www.domain.com/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB")," -> \ud30c\uc77c \ub2e4\uc6b4"),(0,o.kt)("h2",{id:"\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\ud2b9\uc815-\ud30c\uc77c-\uc81c\uacf5\ud558\uae30"},"\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \ud2b9\uc815 \ud30c\uc77c \uc81c\uacf5\ud558\uae30"),(0,o.kt)("p",null,"\uc704 \uacbd\uc6b0\ubcf4\ub2e4 \uc881\uc740 \uc124\uc815\uc774\ub2e4. \ud3f4\ub354 \uc790\uccb4\ub97c \uc81c\uacf5\ud558\ub294 \uac83\uc774 \uc544\ub2cc \ud30c\uc77c\uc744 \uba85\uc2dc\ud574\uc11c \uc81c\uacf5\ud55c\ub2e4.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"server {\n    server_name domain.com;\n\n    client_max_body_size 100M;\n\n    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/domain.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/domain.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    # \uacbd\ub85c+\ud30c\uc77c\uae4c\uc9c0 \uc77c\uce58\ud558\uba74 \uc544\ub798 location \ube14\ub85d\uc744 \uc2e4\ud589\ud55c\ub2e4.  \n    location ~ ^/ads.txt {\n            root /opt/homebrew/etc/nginx/public/domain.com;\n            default_type text/plain;\n    }\n\n    location / { \n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://127.0.0.1:3036/;\n    }\n}\n")),(0,o.kt)("p",null,"\uc608)",(0,o.kt)("br",{parentName:"p"}),"\n",(0,o.kt)("a",{parentName:"p",href:"https://domain.com/ads.txt"},"https://domain.com/ads.txt")," -> \ud14d\uc2a4\ud2b8 \ud30c\uc77c \uc81c\uacf5"),(0,o.kt)("h2",{id:"\uc608-nginx--codeserver-https"},"\uc608) Nginx + CodeServer (https)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    include servers/*;\n\n    # vscode\n    server {\n        listen 443 ssl; \n        server_name code.domain.site; \n        ssl_certificate /etc/letsencrypt/live/code.domain.site/fullchain.pem; \n        ssl_certificate_key /etc/letsencrypt/live/code.domain.site/privkey.pem; \n\n        # SSL \uc124\uc815 \ucd94\uac00 (optional, \ucd94\ucc9c)\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384';\n        # ssl_prefer_server_ciphers off;\n        # ssl_session_timeout 1d;\n        # ssl_session_cache shared:SSL:50m;\n\n\n        location / {\n            proxy_pass http://127.0.0.1:2229;           \n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection upgrade;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }   \n    }\n\n    server {\n        listen 80 ;\n        server_name code.domain.site;\n\n        location /.well-known/acme-challenge {\n            alias /opt/homebrew/etc/nginx/.well-known/acme-challenge; # \uc2e4\uc81c \ud30c\uc77c\uc774 \uc704\uce58\ud55c \uacbd\ub85c\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n            try_files $uri $uri/ /opt/homebrew/etc/nginx/.well-known/acme-challenge/XGNhDLRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCUY; # \ud2b9\uc815 \ud30c\uc77c\uba85\uc744 \uc5ec\uae30\uc5d0 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n        }\n\n        location / {  # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n            return 301 https://$host$request_uri;\n        }\n    }\n\n    # catch all server\n    # nginx always has a default server. \n    # In the absence of any server block explicitly marked as default_server, nginx will use the first server with a matching listen directive.\n    server {\n        listen 80 default_server;\n        # listen 443 ssl default_server;\n        # warn: If you enter domain.com in the browser search box, \n        # it will be displayed as https, and since there is no server block that handles nginx's default 443, \n        # it may branch to a different domain server block than expected.\n\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        location / {\n            # \uae30\ubcf8 \ub3c4\uba54\uc778\uc774\ub098 \ub3c4\uba54\uc778\uc774 \uc5c6\ub294 \uacbd\uc6b0\uc758 \uc124\uc815 \ucd94\uac00\n            return 200 \"ok\";\n        }\n    }\n}\n\n# nginx -t\n# brew services restart nginx\n# sudo chmod -R 755 /etc/letsencrypt\n")),(0,o.kt)("h2",{id:"\uc124\uc815\ud30c\uc77c-\ubd84\ub9ac\ud558\uae30"},"\uc124\uc815\ud30c\uc77c \ubd84\ub9ac\ud558\uae30"),(0,o.kt)("p",null,"server \ube14\ub85d\uc774 \ub9ce\uc544\uc9c0\uba74 \uc124\uc815 \ud30c\uc77c\uc758 \uad00\ub9ac\uac00 \uc5b4\ub824\uc6cc\uc9c4\ub2e4.",(0,o.kt)("br",{parentName:"p"}),"\n","\ub610\ud55c \ud2b9\uc815 \ub3c4\uba54\uc778\uc5d0 \ub300\ud55c \uc124\uc815\ud30c\uc77c\uc744 \uad6c\ubd84\ud558\uace0 \uc2f6\uc740 \ub2c8\uc988\ub3c4 \uc788\ub2e4.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    # servers \ud558\uc704 \ubaa8\ub4e0 \ud3f4\ub354\ub4e4\uc774 \uc124\uc815\ud30c\uc77c\uc5d0 \ud3ec\ud568\ub41c\ub2e4. \n    include servers/*;\n\n    server {\n        listen 80 default_server;\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        location / {\n            return 200 "ok";\n        }\n    }\n}\n\n---\n# servers/example.com.conf\n\nserver {\n    server_name example.com example.com;\n\n    access_log /Users/username/log/ghost_example/access.log;\n    error_log /Users/username/log/ghost_example/error.log;\n\n    client_max_body_size 100M;\n\n    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    location ~ ^/ads.txt {\n            root /opt/homebrew/etc/nginx/public;\n            default_type text/plain;\n    }\n\n    location / { \n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://127.0.0.1:3030/;\n    }\n}\n\nserver {\n    if ($host = example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n\n    if ($host = www.example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n\n    listen 80;\n    server_name www.example.com example.com;\n    return 404; # managed by Certbot\n\n}\n')),(0,o.kt)("h2",{id:"\uae30\ud0c0-\uc124\uc815\ub4e4"},"\uae30\ud0c0 \uc124\uc815\ub4e4"),(0,o.kt)("h3",{id:"client_max_body_size"},"client_max_body_size"),(0,o.kt)("p",null,"\ud070 \ud30c\uc77c \uc5c5\ub85c\ub4dc\uac00 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0, bodySize \uc81c\ud55c\uc744 \uc870\uc815\ud558\uc790.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"client_max_body_size 100M;\n")),(0,o.kt)("h3",{id:"access_log-error_log"},"access_log, error_log"),(0,o.kt)("p",null,"\uc811\uc18d \ub85c\uadf8\ub97c \ub0a8\uae30\uc790. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    access_log /Users/user_name/log/ghost_example/access.log;\n    error_log /Users/user_name/log/ghost_example/error.log;\n")))}m.isMDXComponent=!0}}]);